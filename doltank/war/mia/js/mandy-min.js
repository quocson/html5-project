/*
Title:				Navigation Scroll Behaviour
Author:				Sam Rayner - http://samrayner.com
Created:			2011-06-07
*/var Nav={menu:null,sections:[],current:"#",docked:!1,stealClass:function(a,b){$("."+a).removeClass(a);b.addClass(a)},update:function(a){var b="current",c=Nav.menu.find("a[href="+a+"]");Nav.stealClass(b,c.parent());Nav.current=a},dock:function(){var a=$(window).scrollTop(),b=$("#main").offset();b=b.top;var c="docked";if(!Nav.docked&&a>b){Nav.docked=!0;Nav.menu.addClass(c)}else if(Nav.docked&&a<b){Nav.docked=!1;Nav.menu.removeClass(c)}},watchScroll:function(){var a=$(window).scrollTop(),b=Nav.current;$.each(Nav.sections,function(c,d){var e=d.offset();e=e.top;var f=d.selector;f.indexOf("#")!==0&&(f="#");var g=d.height()*.75;a>=e&&a<=e+g&&(b=f)});Nav.current!=b&&Nav.update(b)},init:function(){Nav.menu=$("nav.fixed");Nav.menu.find("a[href^=#]").each(function(a){var b=$(this).attr("href");b.replace("#","")===""&&(b="html");Nav.sections[a]=$(b)});$(window).scroll(Nav.dock).scroll(Nav.watchScroll);var a=Nav.menu.find("a[href^=#]").first().attr("href");window.location.hash?$.smoothScroll({speed:0,scrollTarget:window.location.hash,afterScroll:function(){Nav.update(window.location.hash)}}):Nav.update(a);$("a[href^=#]").click(function(){$(window).unbind("scroll",Nav.watchScroll)});if(Nav.menu.css("position")=="static")return!1;$("a:not([href="+a+"])").smoothScroll({afterScroll:function(){var a=$(this).attr("href");Nav.update(a);window.location.hash=a.replace("#","");$(window).scroll(Nav.watchScroll)}});var b=$(a).offset();b=b.top;$("a[href="+a+"]").smoothScroll({afterScroll:function(){Nav.update(a);window.location.hash="";$(window).scroll(Nav.watchScroll)},offset:-b})}};$(Nav.init);